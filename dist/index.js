"use strict";var l={translate_en:"translate_en",translate_kr:"translate_kr",translate_cn:"translate_cn",translate_fr:"translate_fr",translate_ja:"translate_ja"},C=Object.values(l),p={translate_en:"tl_open_en",translate_kr:"tl_open_kr",translate_cn:"tl_open_cn",translate_fr:"tl_open_fr",translate_ja:"tl_open_ja"},f=Object.values(p),o={translate_en:"\u{1F1FA}\u{1F1F8}",translate_kr:"\u{1F1F0}\u{1F1F7}",translate_cn:"\u{1F1E8}\u{1F1F3}",translate_fr:"\u{1F1EB}\u{1F1F7}",translate_ja:"\u{1F1EF}\u{1F1F5}"},g={translate_en:"en",translate_kr:"ko",translate_cn:"zh-CN",translate_fr:"fr",translate_ja:"ja"},I={tl_open_en:"en",tl_open_kr:"ko",tl_open_cn:"zh-CN",tl_open_fr:"fr",tl_open_ja:"ja"},b={id:"id","en-US":"en","en-GB":"en",bg:"bg","zh-CN":"zh-CN","zh-TW":"zh-TW",hr:"hr",cs:"cs",da:"da",nl:"ml",fi:"fi",fr:"fr",de:"de",el:"el",hi:"hi",hu:"hu",it:"it",ja:"ja",ko:"ko",lt:"lt",no:"no",pl:"pl","pt-BR":"pt-BR",ro:"ro",ru:"ru","es-ES":"es","sv-SE":"sv",th:"th",tr:"tr",uk:"uk",vi:"vi"};var P=require("@discordjs/rest"),j=require("@discordjs/ws"),e=require("@discordjs/core");var A=require("dotenv");(0,A.config)();var S=["DISCORD_CLIENT_ID","DISCORD_TOKEN"];for(let t in S)if(!(t in S))throw new Error(`Env Var: {${t}} not found`);var d=process.env,h=require("translate-google-api"),i=h;var y=require("@discordjs/core");var n=require("@discordjs/core");var T={type:n.ComponentType.Button,custom_id:l.translate_en,style:n.ButtonStyle.Secondary,label:o.translate_en},D={type:n.ComponentType.Button,custom_id:l.translate_kr,style:n.ButtonStyle.Secondary,label:o.translate_kr},O={type:n.ComponentType.Button,custom_id:l.translate_cn,style:n.ButtonStyle.Secondary,label:o.translate_cn},N={type:n.ComponentType.Button,custom_id:l.translate_fr,style:n.ButtonStyle.Secondary,label:o.translate_fr},x={type:n.ComponentType.Button,custom_id:l.translate_ja,style:n.ButtonStyle.Secondary,label:o.translate_ja};var a=require("@discordjs/core");var R={type:a.ComponentType.Button,custom_id:p.translate_en,style:a.ButtonStyle.Secondary,label:o.translate_en},k={type:a.ComponentType.Button,custom_id:p.translate_kr,style:a.ButtonStyle.Secondary,label:o.translate_kr},M={type:a.ComponentType.Button,custom_id:p.translate_cn,style:a.ButtonStyle.Secondary,label:o.translate_cn},w={type:a.ComponentType.Button,custom_id:p.translate_fr,style:a.ButtonStyle.Secondary,label:o.translate_fr},B={type:a.ComponentType.Button,custom_id:p.translate_ja,style:a.ButtonStyle.Secondary,label:o.translate_ja};var v={type:y.ComponentType.ActionRow,components:[T,D,O,x,N]},E={type:y.ComponentType.ActionRow,components:[R,k,M,B,w]};var G=new P.REST({version:"10"}).setToken(d.DISCORD_TOKEN),L=new j.WebSocketManager({token:d.DISCORD_TOKEN,intents:e.GatewayIntentBits.MessageContent|e.GatewayIntentBits.GuildMessages|e.GatewayIntentBits.DirectMessages|e.GatewayIntentBits.GuildWebhooks|e.GatewayIntentBits.GuildMembers,rest:G}),m=new e.Client({rest:G,gateway:L});m.api.applicationCommands.createGlobalCommand(process.env.DISCORD_CLIENT_ID,{name:"Translate Text",type:e.ApplicationCommandType.Message});m.api.applicationCommands.createGlobalCommand(process.env.DISCORD_CLIENT_ID,{name:"Translate to Locale",type:e.ApplicationCommandType.Message});m.api.applicationCommands.createGlobalCommand(process.env.DISCORD_CLIENT_ID,{name:"Open Translation",type:e.ApplicationCommandType.Message});m.on(e.GatewayDispatchEvents.InteractionCreate,async({data:t,api:c})=>{if(t.type===e.InteractionType.ApplicationCommand&&t.data.name==="Translate Text"){if(t.data.type!==e.ApplicationCommandType.Message)return;let s=t.data.resolved,r=t.data.target_id;console.log("user:",t.locale??t.user);let _=s.messages[r].content;await c.interactions.reply(t.id,t.token,{flags:e.MessageFlags.Ephemeral,components:[v],embeds:[{title:"Translate text to a language",description:_,color:1}]})}if(t.type===e.InteractionType.MessageComponent){if(t.message.type===e.MessageType.ContextMenuCommand&&C.includes(t.data.custom_id)){let s=t.message.embeds[0].description,r=t.data.custom_id,_=await i(s,{to:g[r]});await c.interactions.reply(t.id,t.token,{content:_[0],flags:e.MessageFlags.Ephemeral})}if(t.message.type===e.MessageType.ContextMenuCommand&&f.includes(t.data.custom_id)){let s=t.message.embeds[0].description,r=t.data.custom_id,_=await i(s,{to:I[r]});await c.interactions.reply(t.id,t.token,{embeds:[{title:"Translation",description:`From: ${s}
To: ${_[0]}`}]}),await c.interactions.deleteReply(d.DISCORD_CLIENT_ID,t.id)}}if(t.type===e.InteractionType.ApplicationCommand&&t.data.name==="Translate to Locale"){if(t.data.type!==e.ApplicationCommandType.Message)return;let s=t.data.resolved,r=t.data.target_id,_=s.messages[r].content,u=await i(_,{to:b[t.locale]});await c.interactions.reply(t.id,t.token,{flags:e.MessageFlags.Ephemeral,content:u[0]})}if(t.type===e.InteractionType.ApplicationCommand&&t.data.name==="Open Translation"){if(t.data.type!==e.ApplicationCommandType.Message)return;let s=t.data.resolved,r=t.data.target_id,u=s.messages[r].content;await c.interactions.reply(t.id,t.token,{components:[E],embeds:[{title:"Translate text to a language",description:u,color:1}]})}});m.once(e.GatewayDispatchEvents.Ready,()=>console.log("Ready!"));L.connect();
